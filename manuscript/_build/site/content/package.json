{"kind":"Notebook","sha256":"7fbe5ef9d8cea20c72959eeb38bae5bd3a6cd28a7a5aa2f6151397d24ce48953","slug":"package","location":"/03-package.ipynb","dependencies":[],"frontmatter":{"title":"Python Package","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Giuseppe Gallitto","given":"Giuseppe","family":"Gallitto"},"name":"Giuseppe Gallitto","email":"giuseppe.gallitto@uk-essen.de","affiliations":["Center for Translational Neuro- and Behavioral Sciences (C-TNBS), University Medicine Essen, Germany","Department of Neurology, University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Robert Englert","given":"Robert","family":"Englert"},"name":"Robert Englert","affiliations":["Department of Diagnostic and Interventional Radiology and Neuroradiology, University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Balint Kincses","given":"Balint","family":"Kincses"},"name":"Balint Kincses","affiliations":["Department of Neurology, University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Raviteja Kotikalapudi","given":"Raviteja","family":"Kotikalapudi"},"name":"Raviteja Kotikalapudi","affiliations":["Department of Neurology, University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-3"},{"nameParsed":{"literal":"Jialin Li","given":"Jialin","family":"Li"},"name":"Jialin Li","affiliations":["Department of Neurology, University Medicine Essen, Germany","Max Planck School of Cognition, Leipzig, Germany"],"id":"contributors-myst-generated-uid-4"},{"nameParsed":{"literal":"Kevin Hoffschlag","given":"Kevin","family":"Hoffschlag"},"name":"Kevin Hoffschlag","affiliations":["Department of Neurology, University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-5"},{"nameParsed":{"literal":"Ulrike Bingel","given":"Ulrike","family":"Bingel"},"name":"Ulrike Bingel","affiliations":["Department of Neurology, University Medicine Essen, Germany","Center for Translational Neuro- and Behavioral Sciences (C-TNBS), University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-6"},{"nameParsed":{"literal":"Tamas Spisak","given":"Tamas","family":"Spisak"},"name":"Tamas Spisak","orcid":"0000-0002-2942-0821","corresponding":true,"email":"tamas.spisak@uk-essen.de","affiliations":["Department of Diagnostic and Interventional Radiology and Neuroradiology, University Medicine Essen, Germany","Center for Translational Neuro- and Behavioral Sciences (C-TNBS), University Medicine Essen, Germany"],"id":"contributors-myst-generated-uid-7"}],"license":{"content":{"id":"CC-BY-4.0","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true,"url":"https://creativecommons.org/licenses/by/4.0/"}},"github":"https://github.com/pni-lab/adaptivesplit","keywords":[],"affiliations":[{"id":"Center for Translational Neuro- and Behavioral Sciences (C-TNBS), University Medicine Essen, Germany","name":"Center for Translational Neuro- and Behavioral Sciences (C-TNBS), University Medicine Essen, Germany"},{"id":"Department of Neurology, University Medicine Essen, Germany","name":"Department of Neurology, University Medicine Essen, Germany"},{"id":"Department of Diagnostic and Interventional Radiology and Neuroradiology, University Medicine Essen, Germany","name":"Department of Diagnostic and Interventional Radiology and Neuroradiology, University Medicine Essen, Germany"},{"id":"Max Planck School of Cognition, Leipzig, Germany","name":"Max Planck School of Cognition, Leipzig, Germany"}],"exports":[{"format":"ipynb","filename":"03-package.ipynb","url":"/03-package-758d7d0029fc388e5dddf3296951857f.ipynb"}]},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Quick Start Guide","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C9D5jAiGXi"}],"identifier":"quick-start-guide","label":"Quick Start Guide","html_id":"quick-start-guide","implicit":true,"key":"kNQDX9ahWr"}],"key":"BqVjctkaNU"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2024-04-30T09:44:48.830886Z","start_time":"2024-04-30T09:44:48.826595Z"},"collapsed":true},"children":[{"type":"code","lang":"python","executable":true,"value":"import sys\nsys.path.insert(0, \"..\")\n\nfrom sklearn import datasets\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nimport adaptivesplit.sklearn_interface as asi","key":"EVxkfhOdpK"},{"type":"output","id":"sQ2GAogBXMgGLFiA7-04O","data":[],"key":"Iwx96e0WoX"}],"key":"D6gRyClbah"},{"type":"block","kind":"notebook-content","data":{"collapsed":false},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We try to adaptively split the california housing dataset (Regression task)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j0moT1lYmZ"}],"key":"ugRVCjKRHC"}],"key":"IbIPqPl0PC"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2024-04-30T09:44:50.127218Z","start_time":"2024-04-30T09:44:50.115334Z"},"collapsed":false},"children":[{"type":"code","lang":"python","executable":true,"value":"##\n# Load California Housing dataset;\n##\n\nX, y = datasets.fetch_california_housing(return_X_y=True)\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.33, random_state=42)","key":"sHK6KibrDg"},{"type":"output","id":"m6RuA8raAjGv-g8a5k6Wo","data":[],"key":"qU5czWqDqO"}],"key":"o0OXJIwyj6"},{"type":"block","kind":"notebook-content","data":{"collapsed":false},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s run the adaptivesplit trying to find an adaptive stopping point using the power rule,\nWe can set a custom stopping rule by modifying the “adaptivesplit/sklearn_interface/settings.conf” file.\n(see the documentation in docs/)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rtVKz0Lgg2"}],"key":"Ik9R8s0EPb"}],"key":"b0g1IN7knU"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2024-04-30T09:44:50.926742Z","start_time":"2024-04-30T09:44:50.865300Z"},"collapsed":false},"children":[{"type":"code","lang":"python","executable":true,"value":"##\n# Use Ridge regression;\n##\n\nfrom sklearn.linear_model import RidgeCV\n\nmodel = RidgeCV(scoring='neg_mean_absolute_error',\n                alphas=(0.1, 1, 10))  # default alpha values;\n\nfrom adaptivesplit.sklearn_interface.split import AdaptiveSplit\n\nadsplit = AdaptiveSplit(total_sample_size=len(y_train), plotting=True)\nres, fig = adsplit(X_train, y_train, model, fast_mode=True, predict=False, random_state=42)\nstop = res.estimated_stop\nprint(res)","key":"ki0qj99FDe"},{"type":"output","id":"KC7ebqOepQGdLzlfh08Zu","data":[{"name":"stderr","output_type":"stream","text":"Calculating learning curve: 100%|██████████| 1200/1200 [00:16<00:00, 73.57it/s] \n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\nc:\\Users\\teari\\anaconda3\\envs\\sklearn\\Lib\\site-packages\\pygam\\pygam.py:1150: RuntimeWarning: divide by zero encountered in scalar divide\n  r2['explained_deviance'] = 1.0 - full_d.sum() / null_d.sum()\nc:\\Users\\teari\\anaconda3\\envs\\sklearn\\Lib\\site-packages\\pygam\\pygam.py:1150: RuntimeWarning: divide by zero encountered in scalar divide\n  r2['explained_deviance'] = 1.0 - full_d.sum() / null_d.sum()\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\nc:\\Users\\teari\\anaconda3\\envs\\sklearn\\Lib\\site-packages\\pygam\\pygam.py:1150: RuntimeWarning: divide by zero encountered in scalar divide\n  r2['explained_deviance'] = 1.0 - full_d.sum() / null_d.sum()\nc:\\Users\\teari\\anaconda3\\envs\\sklearn\\Lib\\site-packages\\pygam\\pygam.py:1150: RuntimeWarning: divide by zero encountered in scalar divide\n  r2['explained_deviance'] = 1.0 - full_d.sum() / null_d.sum()\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n  0% (0 of 5) |                          | Elapsed Time: 0:00:00 ETA:  --:--:--\n100% (5 of 5) |##########################| Elapsed Time: 0:00:00 Time:  0:00:00\n"},{"name":"stdout","output_type":"stream","text":"AdaptiveSplitResults(stop=True, predicted=False, estimated_stop=13823, current_sample_size=13828, score_if_stop=-0.5303170596309875, score_if_stop_now_ci=(-0.6793798059716281, -0.5210603382473786), power_if_stop_now=-0.04007880548353565, power_if_stop_now_ci=(-0.3974375057013489, 0.7068074100269603), score_predicted=None, score_predicted_ci=(None, None), power_predicted=None, power_predicted_ci=(None, None))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"83fcb6cc9bdc19f67f3b704fe3d04312","path":"/83fcb6cc9bdc19f67f3b704fe3d04312.png"},"text/plain":{"content":"<Figure size 800x800 with 2 Axes>","content_type":"text/plain"}}}],"key":"LE1t4Jq87T"}],"key":"HR87rug5Ut"}],"key":"atNmEbgpKv"},"references":{"cite":{"order":[],"data":{}}}}